<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Ac-Editor</title>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap-responsive.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/style.css"/>
  </head>
<body>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span3"><ul class="nav nav-list">
    <li class="sidebar-header-1"><a href="#ac-editor">Ac-Editor</a></li>
    <li class="sidebar-header-4"><a href="#一个基于draft-js的web富文本编辑器，适用于react框架，兼容主流现代浏览器。">一个基于draft-js的Web富文本编辑器，适用于React框架，兼容主流现代浏览器。</a></li>
    <li class="sidebar-header-2"><a href="#特性">特性</a></li>
    <li class="sidebar-header-2"><a href="#安装">安装</a></li>
    <li class="sidebar-header-2"><a href="#使用">使用</a></li>
</ul>
      </div>
      <div class="span9 main"><h1 id="ac-editor">Ac-Editor</h1>
<p><a href="https://www.npmjs.com/package/ac-editor"><img src="https://img.shields.io/npm/v/ac-editor.svg" alt="npm version"></a>
<a href="https://npmjs.org/package/ac-editor"><img src="http://img.shields.io/npm/dt/ac-editor.svg?style=flat" alt="NPM downloads"></a></p>
<h4 id="一个基于draft-js的web富文本编辑器，适用于react框架，兼容主流现代浏览器。">一个基于draft-js的Web富文本编辑器，适用于React框架，兼容主流现代浏览器。</h4>
<h2 id="特性">特性</h2>
<ul class="list">
<li>完善的文本内容编辑功能</li>
<li>诸多开放的编辑接口，良好的可扩展性</li>
<li>允许插入图片、音视频等多媒体内容</li>
<li>允许自定义多媒体内容的上传接口</li>
<li>允许设置图片的左右浮动（即文字绕排功能）</li>
<li>允许设置编辑器可用的颜色列表、字号以及字体</li>
<li>允许自定义需要展示的控制按钮和展示顺序</li>
<li>允许增加额外的自定义按钮</li>
<li>多语言支持（目前已支持简体中文、繁体中文和英文）</li>
</ul>
<h2 id="安装">安装</h2>
<pre class="hljs"><code><span class="hljs-comment"># 使用yarn安装</span>
yarn add ac-editor
<span class="hljs-comment"># 使用npm安装</span>
npm install ac-editor --save</code></pre><h2 id="使用">使用</h2>
<p>编辑器支持<strong>value</strong>和<strong>onChange</strong>属性，这类似于React中原生的input组件。通常情况下，可以用典型的<strong>受控组件</strong>的形式来使用本编辑器：</p>
<pre class="hljs"><code><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-comment">// 引入编辑器以及EditorState子模块</span>
<span class="hljs-keyword">import</span> AcEditor, { EditorState } <span class="hljs-keyword">from</span> <span class="hljs-string">'ac-editor'</span>;
<span class="hljs-comment">// 引入编辑器样式</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'ac-editor/dist/index.css'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EditorDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{

  state = {
      <span class="hljs-attr">editorState</span>: <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">async</span> componentDidMount () {
    <span class="hljs-comment">// 假设此处从服务端获取html格式的编辑器内容</span>
    <span class="hljs-keyword">const</span> htmlContent = <span class="hljs-keyword">await</span> fetchEditorContent()
    <span class="hljs-comment">// 使用EditorState.createFrom将html字符串转换为编辑器需要的editorState数据</span>
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">editorState</span>: EditorState.createFrom(htmlContent)
    })
  }

  submitContent = <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// 在编辑器获得焦点时按下ctrl+s会执行此方法</span>
    <span class="hljs-comment">// 编辑器内容提交到服务端之前，可直接调用editorState.toHTML()来获取HTML格式的内容</span>
    <span class="hljs-keyword">const</span> htmlContent = <span class="hljs-keyword">this</span>.state.editorState.toHTML();
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> saveEditorContent(htmlContent);
  }

  handleEditorChange = <span class="hljs-function">(<span class="hljs-params">editorState</span>) =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({ editorState });
  }

  render () {
    <span class="hljs-keyword">const</span> { editorState } = <span class="hljs-keyword">this</span>.state;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"my-component"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">AcEditor</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{editorState}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleEditorChange}</span>
          <span class="hljs-attr">onSave</span>=<span class="hljs-string">{this.submitContent}</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    )

  }

}</span></code></pre><p>当然本编辑器也支持<strong>defaultValue</strong>属性，因此你也可以将本编辑器作为一个<strong>非受控组件</strong>来使用。</p>
<hr>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
</body>
</html>
